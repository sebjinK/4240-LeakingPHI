<%- include('partials/header', { user: user }) %>

<div class="d-flex justify-content-between align-items-center mb-3">
  <h2>Your Daily Entries</h2>
  <a href="/entries/new" class="btn btn-primary">+ New Entry</a>
</div>

<% if (!entries.length) { %>
  <p class="text-muted">No entries yet. Start by logging today!</p>
<% } else { %>
  <div class="card shadow soft-card">
    <div class="card-body">
      <div class="table-responsive">
        <table class="table table-striped align-middle">
          <thead>
            <tr>
              <th>Date</th>
              <th>Sleep (h)</th>
              <th>Water (cups)</th>
              <th>Exercise (min)</th>
              <th>Mood</th>
              <th>Notes</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <% entries.forEach(e => { %>
              <tr>
                <td><%= e.date %></td>
                <td><%= e.sleepHours ?? '-' %></td>
                <td><%= e.waterCups ?? '-' %></td>
                <td><%= e.exerciseMinutes ?? '-' %></td>
                <td><%= e.mood ?? '-' %></td>
                <td><%= e.notes ? e.notes.slice(0, 40) + (e.notes.length > 40 ? 'â€¦' : '') : '-' %></td>
                <td class="text-end">
                  <a href="/entries/<%= e.id %>/edit" class="btn btn-sm btn-outline-secondary me-1">Edit</a>
                  <form action="/entries/<%= e.id %>/delete" method="POST" class="d-inline">
                    <button class="btn btn-sm btn-outline-danger" onclick="return confirm('Delete this entry?')">
                      Delete
                    </button>
                  </form>
                </td>
              </tr>
            <% }) %>
          </tbody>
        </table>
      </div>
    </div>
  </div>
<% } %>

<%- include('partials/footer') %>